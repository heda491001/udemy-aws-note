Load Balancer Error codes
    Successful request : Code 200.
    Unsuccessful at client side : 4XX code.
        Error 400 : Bad Request
        Error 401 : Unauthorized
        Error 403 : Forbidden
        Error 460 : Client closed connection.
        Error 463 : X-Forwarded For header with >30 IP (Similar to malformed request).
    Unsuccessful at server side : 5xx code.
        An error 500 / Internal server error would mean some error on the ELB itself.
        Error 502 : Bad Gateway
        An error 503 / Service Unavailable
            如果ALB后边的实例无法响应请求, 就会发送503
        Error 504 / Gateway timeout : probably an issue within the server.
        Error 561 : Unauthorized

Load Balancers Monitoring
    All Load Balancer metrics are directly pushed to CloudWatch metrics
    below items will be sent to CW Metrics
        BackendConnectionErrors
        HealthyHostCount / UnHealthyHostCount
        HTTPCode_Backend_2XX: 
            Successful request.
        HTTPCode_Backend_3XX: 
            redirected request
        HTTPCode_ELB_4XX: 
            Client error codes
        HTTPCode_ELB_5XX: 
            Server error codes generated by the load balancer.
        Latency
        RequestCount
        RequestCountPerTarget
        SurgeQueueLength: 
            The total number of requests (HTTP listener) or connections (TCP listener) 
            that are pending routing to a healthy instance.
            Help to scale out ASG. Max value is 1024
        SpilloverCount: 
            The total number of requests that were rejected because the surge queue is full.

Load Balancer troubleshooting using metrics
    HTTP 400: 
        BAD_REQUEST => 
            The client sent a malformed request that does not meet HTTP specifications.
    HTTP 503: 
        Service Unavailable => 
            Ensure that you have healthy instances in every Availability Zone 
            that your load balancer is configured to respond in.
            Look for HealthyHostCount in CloudWatch
    HTTP 504: 
        Gateway Timeout => 
            Check if keep-alive settings on your EC2 instances are enabled 
            and make sure that the keep-alive timeout is greater than 
            the idle timeout settings of load balancer.
    Set alarms & look at the documentation for troubleshooting:
        https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/ts-elb-error-message.html

Load Balancers Access Logs
    Access logs from Load Balancers can be stored in S3 and contain:
        Time
        Client IP address
        Latencies
        Request paths
        Server response
        Trace Id
    Only pay for the S3 storage
    Helpful for compliance reason
    Helpful for keeping access data even after ELB or EC2 instances are terminated
    Access Logs are already encrypted

Application Load Balancer Request Tracing
    Request tracing – Each HTTP request has an added custom header ‘X-Amzn-Trace-Id’
    Example:
        X-Amzn-Trace-Id: Root=1-67891233-abcdef012345678912345678
    This is useful in logs / distributed tracing platform to track a single request
    Application Load Balancer is not (yet) integrated with X-Ray
